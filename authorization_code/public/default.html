<!doctype html>
<html>
  <head>
    <title>test</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

  </head>

  <body>
    <div class="container">

		<div class="form-group">
    		<label for="artist">Search an Artist:</label>
    		<input type="text" class="form-control" id="artist-input">
  		</div>

		<button type="button" class="btn btn-primary" id="submit">Submit</button>

		<div class="row">
			<div class="col-md-4">
				<div class="panel panel-primary">
      				<div class="panel-heading">Artists</div>
      				<div class="panel-body">
      					<div class="list-group" id="artist-display">

						</div>
      				</div>
    			</div>
			</div>

			<div class="col-md-4">
				<div class="panel panel-primary">
      				<div class="panel-heading">Albums</div>
      				<div class="panel-body">
      					<div class="list-group" id="album-display">

						</div>
      				</div>
    			</div>
			</div>

			<div class="col-md-4">
				<div class="panel panel-primary">
      				<div class="panel-heading">Tracks</div>
      				<div class="panel-body">
      					<div class="list-group" id="track-display">

						</div>
      				</div>
    			</div>
			</div>
		</div>
		
    </div>
  </body>

  <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

  <script type="text/javascript">
  	


    $("#submit").on('click', function() {
    	var artistSearch = {};
    	artistSearch.queryTerm = $("#artist-input").val().trim();
    	// console.log("you searched for: " + queryTerm);
    	// console.log(typeof queryTerm);

    	$.ajax({
          method: "POST",
          url: "/spotify",
          data: artistSearch,
          dataType: "JSON"
        }).done(function (data) {
          var test = JSON.stringify(data);
          console.log(test);
          console.log("artist search results:");
          for(var i = 0; i < data.artists.items.length; i++){
          	console.log((i+1) + ") " + data.artists.items[i].name);
          	//dynamically create html elements that will serve as buttons to select an artist from the search results
          	var $artistSearchResult = $("<a>");
          	$artistSearchResult.addClass("list-group-item");
          	$artistSearchResult.addClass("artistResult");
          	// $artistSearchResult.attr('id', data.artists.items[i].name);
          	$artistSearchResult.text(data.artists.items[i].name);
          	//append the artist search result to the #artist-display
          	$("#artist-display").append($artistSearchResult);
          }
          
        });
    });

    //on click for dynamically created artist search results
    $(document).on("click", ".artistResult", function() {
    	alert("artist result clicked");
    	console.log($(this).text());

    	var albumSearch = {};
    	albumSearch.queryTerm = $(this).text();	

    	$.ajax({
          method: "POST",
          url: "/artist",
          data: albumSearch,
          dataType: "JSON"
        }).done(function (data) {
          var test = JSON.stringify(data);
          console.log(test);
          console.log("album search results:");
          for(var i = 0; i < data.albums.items.length; i++){
          	console.log((i+1) + ") " + data.albums.items[i].name);
          	//dynamically create html elements that will serve as buttons to select an artist from the search results
          	var $albumSearchResult = $("<a>");
          	$albumSearchResult.addClass("list-group-item");
          	$albumSearchResult.addClass("albumResult");
          	// $artistSearchResult.attr('id', data.artists.items[i].name);
          	$albumSearchResult.text(data.albums.items[i].name);
          	//append the artist search result to the #artist-display
          	$("#album-display").append($albumSearchResult);
          }
          
        });

    });

    //on click for dynamically created album search results
    $(document).on("click", ".albumResult", function() {
    	alert("album result clicked");
    	console.log($(this).text());

    	var trackSearch = {};
    	trackSearch.queryTerm = $(this).text();	

    	$.ajax({
          method: "POST",
          url: "/album",
          data: trackSearch,
          dataType: "JSON"
        }).done(function (data) {
          var test = JSON.stringify(data);
          console.log(test);
          console.log("track search results:");
          for(var i = 0; i < data.tracks.items.length; i++){
          	console.log((i+1) + ") " + data.tracks.items[i].name);
          	//dynamically create html elements that will serve as buttons to select an artist from the search results
          	var $trackSearchResult = $("<a>");
          	$trackSearchResult.addClass("list-group-item");
          	$trackSearchResult.addClass("albumResult");
          	// $artistSearchResult.attr('id', data.artists.items[i].name);
          	$trackSearchResult.text(data.tracks.items[i].name);
          	//append the artist search result to the #artist-display
          	$("#track-display").append($trackSearchResult);
          }
          
        });
    });
   	
  </script>